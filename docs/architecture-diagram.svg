<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1080" height="680" viewBox="0 0 1080 680" font-family="Inter, Arial, Helvetica, sans-serif" font-size="14">
  <defs>
    <style>
      .title { font-size: 22px; font-weight: 700; }
      .subtitle { font-size: 16px; fill: #444; }
      .box { fill: #f9fafb; stroke: #cbd5e1; stroke-width: 1.5; rx: 10; ry: 10; }
      .svc { fill: #eef2ff; stroke: #6366f1; stroke-width: 1.5; rx: 8; ry: 8; }
      .proxy { fill: #ecfeff; stroke: #06b6d4; stroke-width: 1.5; rx: 10; ry: 10; }
      .coolify { fill: #fefce8; stroke: #f59e0b; stroke-width: 1.5; rx: 10; ry: 10; }
      .net { fill: #f1f5f9; stroke: #94a3b8; stroke-dasharray: 6 6; rx: 12; ry: 12; }
      .arrow { stroke: #64748b; stroke-width: 1.5; marker-end: url(#arrowhead); }
      .note { fill: #fff7ed; stroke: #fdba74; stroke-width: 1; rx: 6; ry: 6; }
      .muted { fill: #64748b; }
      .label { fill: #0f172a; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="40" y="44" class="title">THA Infrastructure on Coolify</text>
  <text x="40" y="70" class="subtitle">Cloudflare DNS + Traefik reverse proxy + Docker network with services and monitoring</text>

  <!-- Internet / Cloudflare / UptimeRobot -->
  <rect x="40" y="100" width="320" height="160" class="box"/>
  <text x="60" y="130" class="label">Internet</text>
  <rect x="60" y="150" width="280" height="40" class="box"/>
  <text x="75" y="175" class="label">Cloudflare DNS → A records to server IP</text>
  <rect x="60" y="200" width="280" height="40" class="box"/>
  <text x="75" y="225" class="label">UptimeRobot → HTTPS checks (5 min)</text>

  <!-- Server boundary -->
  <rect x="400" y="100" width="640" height="520" class="box"/>
  <text x="420" y="130" class="label">Hetzner VM (Ubuntu) • Docker + Coolify</text>

  <!-- Traefik proxy -->
  <rect x="720" y="150" width="280" height="60" class="proxy"/>
  <text x="735" y="185" class="label">Traefik (coolify-proxy) • TLS (Let's Encrypt)</text>

  <!-- Coolify dashboard -->
  <rect x="420" y="150" width="280" height="60" class="coolify"/>
  <text x="435" y="175" class="label">Coolify Dashboard</text>

  <!-- Network area -->
  <rect x="420" y="240" width="580" height="360" class="net"/>
  <text x="440" y="268" class="muted">Docker internal network</text>

  <!-- Services grid -->
  <rect x="440" y="290" width="260" height="90" class="svc"/>
  <text x="455" y="318" class="label">Grafana</text>
  <text x="455" y="342" class="muted">analytics.thehockeyanalytics.com</text>

  <rect x="720" y="290" width="260" height="90" class="svc"/>
  <text x="735" y="318" class="label">n8n</text>
  <text x="735" y="342" class="muted">automation.thehockeyanalytics.com</text>

  <rect x="440" y="400" width="260" height="90" class="svc"/>
  <text x="455" y="428" class="label">MinIO</text>
  <text x="455" y="452" class="muted">data.thehockeyanalytics.com</text>

  <rect x="720" y="400" width="260" height="90" class="svc"/>
  <text x="735" y="428" class="label">Mage AI</text>
  <text x="735" y="452" class="muted">etl.thehockeyanalytics.com</text>

  <rect x="440" y="510" width="260" height="90" class="svc"/>
  <text x="455" y="538" class="label">Crawlab</text>
  <text x="455" y="562" class="muted">scrapers.thehockeyanalytics.com</text>

  <rect x="720" y="510" width="260" height="90" class="svc"/>
  <text x="735" y="538" class="label">Appsmith</text>
  <text x="735" y="562" class="muted">portal.thehockeyanalytics.com</text>

  <!-- Arrows: Internet to Traefik -->
  <line x1="360" y1="180" x2="720" y2="180" class="arrow"/>
  <text x="520" y="170" class="muted">HTTPS</text>

  <!-- Arrows: Traefik to services -->
  <line x1="860" y1="210" x2="570" y2="290" class="arrow"/>
  <line x1="860" y1="210" x2="860" y2="290" class="arrow"/>
  <line x1="860" y1="210" x2="570" y2="400" class="arrow"/>
  <line x1="860" y1="210" x2="860" y2="400" class="arrow"/>
  <line x1="860" y1="210" x2="570" y2="510" class="arrow"/>
  <line x1="860" y1="210" x2="860" y2="510" class="arrow"/>

  <!-- Note: Secrets handling -->
  <rect x="40" y="300" width="320" height="120" class="note"/>
  <text x="55" y="328" class="label">Secrets</text>
  <text x="55" y="352" class="muted">Compose files use ${VAR} placeholders</text>
  <text x="55" y="374" class="muted">Populate via .env (not committed)</text>

  <!-- Note: Monitoring -->
  <rect x="40" y="440" width="320" height="120" class="note"/>
  <text x="55" y="468" class="label">Monitoring</text>
  <text x="55" y="492" class="muted">UptimeRobot checks external endpoints</text>
  <text x="55" y="514" class="muted">Grafana for dashboards</text>
</svg>
